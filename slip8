Q.1) Write a C program that redirects standard output to a file output.txt. (use of dup 
and open system call). [10 Marks ]
#include <stdio.h>
#include <unistd.h>
#include <fcntl.h>
int main() {
 // Open output.txt for writing. Create if not exist, truncate if exists, permissions 0644
 int fd = open("output.txt", O_WRONLY | O_CREAT | O_TRUNC, 0644);
 if (fd < 0) {
 perror("open");
 return 1;
 }
 // Duplicate fd onto standard output (fd 1)
 if (dup2(fd, STDOUT_FILENO) < 0) {
 perror("dup2");
 close(fd);
 return 1;
 }
 close(fd); // fd no longer needed
 // Now all printf/fputs/puts to stdout will go to output.txt
printf("This line will be written to output.txt\n");
 printf("Redirection works using open() and dup2() system calls.\n");
 return 0;
}
OUTPUT:
This line will be written to output.txt
Redirection works using open() and dup2() system calls.
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Q.2) Implement the following unix/linux command (use fork, pipe and exec system 
call) ls –l | wc –l. [20 Marks ]
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
int main() {
 int fd[2];
 pipe(fd);
 pid_t pid = fork();
 if (pid < 0) {
 perror("fork");
 exit(1);
 }
 if (pid == 0) {
// Child: runs 'ls -l', writes to pipe
 close(fd[0]); // Close read end
 dup2(fd[1], STDOUT_FILENO); // Redirect stdout to pipe's write end
 close(fd[1]);
 execlp("ls", "ls", "-l", NULL);
 perror("execlp"); // Only if execlp fails
 exit(1);
 } else {
 // Parent: runs 'wc -l', reads from pipe
 close(fd[1]); // Close write end
 dup2(fd[0], STDIN_FILENO); // Redirect stdin to pipe's read end
 close(fd[0]);
 execlp("wc", "wc", "-l", NULL);
 perror("execlp"); // Only if execlp fails
 exit(1);
 }
 return 0;
}
OUTPUT:
6
