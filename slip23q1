#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
int main() {
 int fd[2];
 pipe(fd);
 pid_t pid = fork();
 if (pid < 0) {
 perror("fork");
 exit(1);
 }
 if (pid == 0) {
// Child: runs 'ls -l', writes to pipe
 close(fd[0]); // Close read end
 dup2(fd[1], STDOUT_FILENO); // Redirect stdout to pipe's write end
 close(fd[1]);
 execlp("ls", "ls", "-l", NULL);
 perror("execlp"); // Only if execlp fails
 exit(1);
 } else {
 // Parent: runs 'wc -l', reads from pipe
 close(fd[1]); // Close write end
 dup2(fd[0], STDIN_FILENO); // Redirect stdin to pipe's read end
 close(fd[0]);
 execlp("wc", "wc", "-l", NULL);
 perror("execlp"); // Only if execlp fails
exit(1);
 }
 return 0;
}
