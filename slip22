Q.1) Write a C Program that demonstrates redirection of standard output to a file . 
[10 Marks ]
#include <stdio.h>
#include <unistd.h>
#include <fcntl.h>
int main() {
 int fd = open("output.txt", O_WRONLY | O_CREAT | O_TRUNC, 0644);
 if (fd < 0) {
 perror("open");
 return 1;
 }
 // Redirect STDOUT to fd
 if (dup2(fd, STDOUT_FILENO) < 0) {
 perror("dup2");
 close(fd);
 return 1;
 }
 close(fd); // fd is now duplicated to STDOUT, so can close
 printf("This line is written to output.txt\n");
printf("Redirection using dup2() and open()\n");
 return 0;
}
OUTPUT:
Terminal Output:
(No output on terminal)
This line is written to output.txt
Redirection using dup2() and open()
------------------------------------------------------------------------------------------------------------------------------------------------------------
--------------------------
Q.2) Write a C program to implement the following unix/linux command (use fork, pipe 
and exec system call). Your program should block the signal Ctrl-C and Ctrl-\ signal 
during the execution. i. ls –l | wc –l [20 Marks ]
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <signal.h>
#include <sys/wait.h>
int main() {
 int fd[2];
 pipe(fd);
sigset_t block_set, old_set;
 sigemptyset(&block_set);
 sigaddset(&block_set, SIGINT); // Ctrl-C
 sigaddset(&block_set, SIGQUIT); // Ctrl-\
 sigprocmask(SIG_BLOCK, &block_set, &old_set);
 pid_t pid1 = fork();
 if (pid1 == 0) { // First child: ls -l
 // Restore signal mask for child
 sigprocmask(SIG_SETMASK, &old_set, NULL);
 close(fd[0]);
 dup2(fd[1], STDOUT_FILENO);
 close(fd[1]);
 execlp("ls", "ls", "-l", NULL);
 perror("execlp-ls");
 exit(1);
 }
 pid_t pid2 = fork();
 if (pid2 == 0) { // Second child: wc -l
 // Restore signal mask for child
 sigprocmask(SIG_SETMASK, &old_set, NULL);
 close(fd[1]);
 dup2(fd[0], STDIN_FILENO);
 close(fd[0]);
 execlp("wc", "wc", "-l", NULL);
 perror("execlp-wc");
exit(1);
 }
 // Parent closes both ends and waits
 close(fd[0]);
 close(fd[1]);
 waitpid(pid1, NULL, 0);
 waitpid(pid2, NULL, 0);
 // Restore original signal mask after critical section
 sigprocmask(SIG_SETMASK, &old_set, NULL);
 return 0;
}
OUTPUT:
6
